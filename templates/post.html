{% extends "base.html" %}

{% block content %}
    <h2>Post a Note</h2>
    <div class="post-form-container">
        {% if error %}
            <p style="color: red; border: 1px solid red; padding: 0.5rem; border-radius: 4px;">{{ error }}</p>
        {% endif %}

        <form action="/post" method="post">
            {% if not logged_in %}
            <div class="form-group">
                <label for="nsec">Private Key (nsec):</label>
                <input type="password" id="nsec" name="nsec" required placeholder="nsec1...">
                <small>Required to sign the event. You can also <a href="/login">login</a> to save it for this session.</small>
            </div>
            {% else %}
            <p style="font-size: 0.9rem; color: #666; margin-bottom: 1rem;">
                Posting as logged-in user. <a href="/logout">Logout</a> to use a different key.
            </p>
            {% endif %}
            
            <div class="form-group">
                <label for="content">Message:</label>
                <textarea id="content" name="content" rows="4" required placeholder="What's happening?"></textarea>
            </div>
            <button type="submit">Publish</button>
        </form>
    </div>
{% endblock %}
